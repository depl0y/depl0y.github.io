<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Putting a UIPickerView on a UIActionSheet</title>
  <meta name="description" content="Basically there are no really god (and now working) guides on how to put a UIPickerView on a UIActionSheet. Mainly because some things changed with the lates...">

  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/main.css">
  
<!--  <link rel="stylesheet" href="/css/main.css"> -->
  <link rel="canonical" href="http://cocoa.ninja/posts/putting-a-uipickerview-on-a-uiactionsheet">
  <link rel="alternate" type="application/rss+xml" title="cocoa.ninja" href="http://cocoa.ninja/feed.xml" />
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>	    
      <a class="navbar-brand" href="/">
         cocoa.ninja
      </a>
    </div>
  
	  <div class="collapse navbar-collapse">
	      <ul class="nav navbar-nav navbar-right">
		      <li>
			  	<a href="https://twitter.com/depl0y">
					<img src="/img/svg/twitter.svg">
				</a>
	        
			</li>
	     
			<li class="icon  icon--github">
				<a href="https://github.com/depl0y">
					<img src="/img/svg/github.svg">
				</a>
			</li>	 
		
		
			<li class="icon icon--mail">
				<a href="mailto:wim@sortedbits.com">
					<img src="/img/svg/mail.svg">
				</a>
			</li>
			
			<li class="icon icon--so">
				<a href="http://stackoverflow.com/users/69313/wim-haanstra">
					<img src="/img/svg/stackoverflow.svg">
				</a>
			</li>
			
			
			<li class="icon icon--so">
				<a href="skype:wimhaanstra" id="skype_call_wim">
					<img src="/img/svg/skype.svg">
				</a>
			</li>
	  	</ul>
	  </div>
  </div>
</nav>


    <div class="container">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Putting a UIPickerView on a UIActionSheet</h1>
  </header>
</div>

<div class="post-info">
	<div class="author-avatar">
		<img src="http://www.gravatar.com/avatar/0ec84fc5efb4f0dc7db5df8bf6bb41b9.png">
	</div>
	<div class="details">
		<div class="row">
			<div class="col-md-12 author-name">
				Wim Haanstra
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 post-subtitle">
				This post was created on <span class="post-date">July 17, 2010</span>.
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 tags">
		   		
		   			<span class="tag">objC</span>
		   		
			</div>
		</div>
	</div>
</div>


<div class="post">
  <article class="post-content">
    <p>Basically there are no really god (and now working) guides on how to put a UIPickerView on a UIActionSheet. Mainly because some things changed with the latest firmware updates made by Apple. Well after some fiddling around, I got it working.</p>
<!-- more -->
<p>    
    Here is how: <strong>Step 1: Adding the right delegates</strong>Make sure your current class (probably a ViewController) uses the following delegates:</p>
<ul>
<li>UIActionSheetDelegate</li>
<li>UINavigationControllerDelegate</li>
<li>UIPickerViewDelegate</li>
<li>UIPickerViewDataSource</li>
</ul>
<p><a id="more"></a><a id="more-750"></a> <strong>Step 2: Trigger the UIActionSheet</strong> Go to the method where you want to make the UIPickerView appear. In my case it is when I select a row from a table, but of course it could also be when you push a button or anything you want.</p>
<pre class="syntax c">/* first create a UIActionSheet, where you define a title, delegate and a button to close the sheet again */
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select position" delegate:self cancelButtonTitle:@"Done" destructiveButtonTitle:nil otherButtonTitles:nil]; 

/* I always give my controls a tag, to make sure I can work with multiple actionsheets in one View (to identify them when an event triggers */
actionSheet.tag = POSITION_ROW;
actionSheet.actionSheetStyle = UIActionSheetStyleDefault;  

/* Initialize a UIPickerView with 100px space above it, for the button of the UIActionSheet. */
UIPickerView* positionPicker = [[UIPickerView alloc] initWithFrame:CGRectMake(0,100, 320, 216)];
positionPicker.dataSource = self; positionPicker.delegate = self;  

/* another unique tag for this UIPicker */
positionPicker.tag = POSITION_ROW;  

/* Add the UIPickerView to the UIActionSheet */
[actionSheet addSubview:positionPicker];  

/* Select the previous selected value, which for me is stored in 'currentPosition' */
[positionPicker selectRow:currentPosition inComponent:0 animated:NO];  

/* clean up */
[positionPicker release];  

/* Add the UIActionSheet to the view */
[actionSheet showInView:self.view];  

/* Make sure the UIActionSheet is big enough to fit your UIPickerView and it's buttons */
[actionSheet setBounds:CGRectMake(0,0, 320, 411)];  

/* clean up */
[actionSheet release];</pre>
<p><strong>Step 3: Implementing the datasource and delegates for the UIPickerView</strong> Now, the triggering of the UIActionSheet is now working, but you would also like to have some items in your UIPickerView. Well, take a look at the following code and read the comments.</p>
<pre class="syntax c">/* Defines the total number of Components (like groups in a UITableView) in a UIPickerView */
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}  

/* What to do when a row from a UIPickerView is selected. This will trigger each time you scroll the UIPickerView, so only lightweight stuff. */
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    overlayPosition = row;
    [tableSettings reloadData];
}  

/* For me the number of items in the UIPickerView is known on compile time. So here I just return 3 */
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    return 3;
}  

/* Because the UIPickerView expects a UIView for every row you insert in the UIPickerView, you need to make one. What I do here is really simple. I create a UILabel* and with each row it requests I just change the text in the UILabel. */
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    /* Create a UILabel and set it 40 pixels to the right, to make sure it is put nicely in the UIPickerView */
    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(40, 0, 280, 25)] autorelease];
    label.textColor = [UIColor blackColor];
    label.backgroundColor = [UIColor clearColor];
    switch (row)
    {
        default:
        case kUnderClock:
            label.text = @"Under clock";
            break;
       case kAboveSlider:
            label.text = @"Above lock slider";
            break;
       case kCenter:
            label.text = @"Vertically centered";
            break;
    }
    return label;
}</pre>
<p><strong>Step 4: Do stuff when buttons on the UIActionSheet are clicked</strong> Now, the final thing you have to do is make sure you listen to the events of the UIActionSheet also. So here is the code:</p>
<pre class="syntax c">- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (actionSheet.tag == POSITION_ROW)
    {
        /* Do stuff here, only intended for the right UIActionSheet. This only applies for when you use multiple UIActionSheets on the same ViewController. Closing it is unnecessary, because you already specified a destructive button. */
    }
}</pre>

  </article>
</div>


<div id="disqus_thread" class="comments">
  <script type="text/javascript">
      var disqus_shortname = 'cocoaninja';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


    </div>

    <footer class="footer">
	<div class="container">
		<p class="text-muted">&copy; 2015 - Wim Haanstra</p>
	</div>
</footer>

	<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="/js/bootstrap.min.js"></script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	  ga('create', 'UA-15884210-11', 'auto');
	  ga('send', 'pageview');
	
	</script>
	
  </body>

</html>
